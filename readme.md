# 磁贴大挑战 (Magnet Challenge)

**版本**: v2.2
**定位**: 面向家庭的儿童习惯养成与情绪管理小程序

## 1. 项目背景与目标
"磁贴大挑战"是一款基于数字化"代币制"（Token Economy）心理学原理开发的亲子互动应用。旨在通过游戏化的方式，帮助孩子建立良好的生活习惯，培养情绪控制能力，并建立“付出-收获”的价值观念。

## 2. 核心机制
应用围绕 **"磁贴" (Magnets)** 这一核心虚拟货币展开：
- **正向反馈**: 孩子通过完成任务、控制情绪获得磁贴。
- **延迟满足**: 积累磁贴以兑换心仪的奖励（如看电视、买玩具）。
- **可视化激励**: 通过动画、音效和进度条，让孩子的每一次努力都能被看见。

## 3. 核心功能模块

### 3.1 首页 (Home) - 聚合仪表盘
- **视觉风格**: 采用蓝紫色渐变主题，营造梦幻、积极的氛围。
- **状态总览**: 顶部大卡片融合了“当前磁贴总数”与“今日任务完成进度”，一目了然。
- **快捷入口**: 提供“磁贴时刻”和“心情转换”的快速操作入口。
- **响应式布局**: 适配手机竖屏及平板横屏，卡片在宽屏下自动流式排列。

### 3.2 每日约定场景 (Daily Tasks)
设定了5个基础生活习惯，每日自动重置：
1.  **吃饭香香**: 专心吃饭。
2.  **洗刷刷达人**: 卫生习惯。
3.  **玩具回新家**: 整理收纳。
4.  **上学不迟到**: 守时观念。
5.  **准时梦游记**: 作息规律。
*   **全垒打奖励**: 当日5项任务全部完成后，自动触发全垒打特效，并额外奖励 +5 磁贴。
*   **交互细节**: 完成任务时伴有震动反馈和音效，且卡片变为高亮状态。

### 3.3 情绪与行为管理工具
- **心情转换器 (Mood Converter)**:
    - 引导孩子识别负面情绪（生气、难过、疲惫）。
    - 鼓励孩子主动调整心态，成功转换后给予 +2 磁贴奖励。
    - 配备 Lottie 庆祝动画，强化正向心理暗示。
- **磁贴时刻 (Magnet Moments)**:
    - 用于记录每日任务之外的良好表现（如帮助做家务、分享玩具）。
    - 支持自定义描述和奖励数量 (1-5个)，灵活捕捉生活中的闪光点。

### 3.4 梦想屋 (Reward Shop)
- **奖励分级**:
    - **Mini奖励**: 低成本高频次（如看15分钟电视）。
    - **小奖励**: 中等成本（如玩游戏）。
    - **大梦想**: 高成本长期目标（如买心仪玩具）。
- **大梦想进度条**: 针对高价值奖励，显示可视化进度条，让孩子看到距离目标的距离。
- **兑换逻辑**: 余额不足时按钮置灰，余额充足时可兑换，扣除相应磁贴。

### 3.5 个人中心与家长管理 (Profile & Admin)
- **数据概览**: 展示连续打卡天数 (Streak)、全垒打次数等荣誉数据。
- **家长验证机制 (Math Gate)**:
    - 在进行敏感操作（如进入管理后台、大额兑换）时触发。
    - **算法**: 随机生成 10 以内的加法题（和 <= 9），防止幼龄儿童误操作。
- **自定义管理 (CRUD)**:
    - **任务管理**: 家长可新增、删除、修改每日任务的图标、名称和奖励数值。
    - **奖励管理**: 家长可自定义奖励内容及所需磁贴数。

### 3.6 数据统计 (Stats)
- **趋势分析**: D3.js 绘制的折线图，展示近7天的磁贴获取与消耗趋势。
- **来源分析**: 饼图展示磁贴的主要来源（全垒打、任务、心情奖励等），帮助家长分析孩子表现。

## 4. 技术特性
- **框架**: Angular (Standalone Components) + Signals。
- **样式**: Tailwind CSS，支持 Dark Mode 风格的蓝紫渐变，适配多端分辨率。
- **动画**: 集成 Lottie-web 实现流畅的庆祝动画 (Confetti, Checkmarks)。
- **存储**: LocalStorage 本地持久化，保护隐私，无后端依赖。
- **音效**: Web Audio API 实现的交互音效（金币声、庆祝声）。

